

<!DOCTYPE html>
<!--[if IE 8]><html class="no-js lt-ie9" lang="en" > <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js" lang="en" > <!--<![endif]-->
<head>
  <meta charset="utf-8">
  
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  
  <title>drm/tinydrm Tiny DRM drivers &mdash; The Linux Kernel 5.2.0+ documentation</title>
  

  
  
  
  

  
  <script type="text/javascript" src="../_static/js/modernizr.min.js"></script>
  
    
      <script type="text/javascript" id="documentation_options" data-url_root="../" src="../_static/documentation_options.js"></script>
        <script type="text/javascript" src="../_static/jquery.js"></script>
        <script type="text/javascript" src="../_static/underscore.js"></script>
        <script type="text/javascript" src="../_static/doctools.js"></script>
        <script type="text/javascript" src="../_static/language_data.js"></script>
    
    <script type="text/javascript" src="../_static/js/theme.js"></script>

    

  
  <link rel="stylesheet" href="../_static/css/theme.css" type="text/css" />
  <link rel="stylesheet" href="../_static/pygments.css" type="text/css" />
  <link rel="stylesheet" href="../_static/theme_overrides.css" type="text/css" />
    <link rel="index" title="Index" href="../genindex.html" />
    <link rel="search" title="Search" href="../search.html" />
    <link rel="next" title="drm/tve200 Faraday TV Encoder 200" href="tve200.html" />
    <link rel="prev" title="drm/tegra NVIDIA Tegra GPU and display driver" href="tegra.html" /> 
</head>

<body class="wy-body-for-nav">

   
  <div class="wy-grid-for-nav">
    
    <nav data-toggle="wy-nav-shift" class="wy-nav-side">
      <div class="wy-side-scroll">
        <div class="wy-side-nav-search" >
          

          
            <a href="../index.html" class="icon icon-home"> The Linux Kernel
          

          
          </a>

          
            
            
              <div class="version">
                5.2.0
              </div>
            
          

          
<div role="search">
  <form id="rtd-search-form" class="wy-form" action="../search.html" method="get">
    <input type="text" name="q" placeholder="Search docs" />
    <input type="hidden" name="check_keywords" value="yes" />
    <input type="hidden" name="area" value="default" />
  </form>
</div>

          
        </div>

        <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="main navigation">
          
            
            
              
            
            
              <ul>
<li class="toctree-l1"><a class="reference internal" href="../admin-guide/index.html">The Linux kernel user’s and administrator’s guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../firmware-guide/index.html">The Linux kernel firmware guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../userspace-api/index.html">The Linux kernel user-space API guide</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../process/index.html">Working with the kernel development community</a></li>
<li class="toctree-l1"><a class="reference internal" href="../dev-tools/index.html">Development tools for the kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../doc-guide/index.html">How to write kernel documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../kernel-hacking/index.html">Kernel Hacking Guides</a></li>
<li class="toctree-l1"><a class="reference internal" href="../trace/index.html">Linux Tracing Technologies</a></li>
<li class="toctree-l1"><a class="reference internal" href="../maintainer/index.html">Kernel Maintainer Handbook</a></li>
</ul>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="../driver-api/index.html">The Linux driver implementer’s API guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../core-api/index.html">Core API Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../media/index.html">Linux Media Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../networking/index.html">Linux Networking Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../input/index.html">The Linux Input Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../hwmon/index.html">Linux Hardware Monitoring</a></li>
<li class="toctree-l1 current"><a class="reference internal" href="index.html">Linux GPU Driver Developer’s Guide</a><ul class="current">
<li class="toctree-l2"><a class="reference internal" href="introduction.html">Introduction</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm-internals.html">DRM Internals</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm-mm.html">DRM Memory Management</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm-kms.html">Kernel Mode Setting (KMS)</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm-kms-helpers.html">Mode Setting Helper Functions</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm-uapi.html">Userland interfaces</a></li>
<li class="toctree-l2"><a class="reference internal" href="drm-client.html">Kernel clients</a></li>
<li class="toctree-l2 current"><a class="reference internal" href="drivers.html">GPU Driver Documentation</a><ul class="current">
<li class="toctree-l3"><a class="reference internal" href="amdgpu.html">drm/amdgpu AMDgpu driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="amdgpu-dc.html">drm/amd/display - Display Core (DC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="i915.html">drm/i915 Intel GFX Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="meson.html">drm/meson AmLogic Meson Video Processing Unit</a></li>
<li class="toctree-l3"><a class="reference internal" href="pl111.html">drm/pl111 ARM PrimeCell PL111 CLCD Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="tegra.html">drm/tegra NVIDIA Tegra GPU and display driver</a></li>
<li class="toctree-l3 current"><a class="current reference internal" href="#">drm/tinydrm Tiny DRM drivers</a><ul>
<li class="toctree-l4"><a class="reference internal" href="#helpers">Helpers</a></li>
<li class="toctree-l4"><a class="reference internal" href="#mipi-dbi-compatible-controllers">MIPI DBI Compatible Controllers</a></li>
</ul>
</li>
<li class="toctree-l3"><a class="reference internal" href="tve200.html">drm/tve200 Faraday TV Encoder 200</a></li>
<li class="toctree-l3"><a class="reference internal" href="v3d.html">drm/v3d Broadcom V3D Graphics Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="vc4.html">drm/vc4 Broadcom VC4 Graphics Driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="vkms.html">drm/vkms Virtual Kernel Modesetting</a></li>
<li class="toctree-l3"><a class="reference internal" href="bridge/dw-hdmi.html">drm/bridge/dw-hdmi Synopsys DesignWare HDMI Controller</a></li>
<li class="toctree-l3"><a class="reference internal" href="xen-front.html">drm/xen-front Xen para-virtualized frontend driver</a></li>
<li class="toctree-l3"><a class="reference internal" href="afbc.html">Arm Framebuffer Compression (AFBC)</a></li>
<li class="toctree-l3"><a class="reference internal" href="komeda-kms.html">drm/komeda Arm display driver</a></li>
</ul>
</li>
<li class="toctree-l2"><a class="reference internal" href="vga-switcheroo.html">VGA Switcheroo</a></li>
<li class="toctree-l2"><a class="reference internal" href="vgaarbiter.html">VGA Arbiter</a></li>
<li class="toctree-l2"><a class="reference internal" href="todo.html">TODO list</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="../security/index.html">Security Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../sound/index.html">Linux Sound Subsystem Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../crypto/index.html">Linux Kernel Crypto API</a></li>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/index.html">Filesystems in the Linux kernel</a></li>
<li class="toctree-l1"><a class="reference internal" href="../vm/index.html">Linux Memory Management Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../bpf/index.html">BPF Documentation</a></li>
<li class="toctree-l1"><a class="reference internal" href="../usb/index.html">USB support</a></li>
<li class="toctree-l1"><a class="reference internal" href="../misc-devices/index.html">Assorted Miscellaneous Devices Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../sh/index.html">SuperH Interfaces Guide</a></li>
<li class="toctree-l1"><a class="reference internal" href="../x86/index.html">x86-specific Documentation</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../filesystems/ext4/index.html">ext4 Data Structures and Algorithms</a></li>
</ul>
<ul>
<li class="toctree-l1"><a class="reference internal" href="../translations/index.html">Translations</a></li>
</ul>

            
          
        </div>
      </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">

      
      <nav class="wy-nav-top" aria-label="top navigation">
        
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="../index.html">The Linux Kernel</a>
        
      </nav>


      <div class="wy-nav-content">
        
        <div class="rst-content">
        
          















<div role="navigation" aria-label="breadcrumbs navigation">

  <ul class="wy-breadcrumbs">
    
      <li><a href="../index.html">Docs</a> &raquo;</li>
        
          <li><a href="index.html">Linux GPU Driver Developer’s Guide</a> &raquo;</li>
        
          <li><a href="drivers.html">GPU Driver Documentation</a> &raquo;</li>
        
      <li>drm/tinydrm Tiny DRM drivers</li>
    
    
      <li class="wy-breadcrumbs-aside">
        
            
            <a href="../_sources/gpu/tinydrm.rst.txt" rel="nofollow"> View page source</a>
          
        
      </li>
    
  </ul>

  
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
           <div itemprop="articleBody">
            
  <div class="section" id="drm-tinydrm-tiny-drm-drivers">
<h1>drm/tinydrm Tiny DRM drivers<a class="headerlink" href="#drm-tinydrm-tiny-drm-drivers" title="Permalink to this headline">¶</a></h1>
<p>tinydrm is a collection of DRM drivers that are so small they can fit in a
single source file.</p>
<div class="section" id="helpers">
<h2>Helpers<a class="headerlink" href="#helpers" title="Permalink to this headline">¶</a></h2>
<dl class="function">
<dt id="c.tinydrm_machine_little_endian">
bool <code class="descname">tinydrm_machine_little_endian</code><span class="sig-paren">(</span>void<span class="sig-paren">)</span><a class="headerlink" href="#c.tinydrm_machine_little_endian" title="Permalink to this definition">¶</a></dt>
<dd><p>Machine is little endian</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">void</span></code></dt>
<dd>no arguments</dd>
</dl>
<p><strong>Return</strong></p>
<p>true if <em>defined(__LITTLE_ENDIAN)</em>, false otherwise</p>
<dl class="function">
<dt id="c.tinydrm_dbg_spi_message">
void <code class="descname">tinydrm_dbg_spi_message</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/spi.html#c.spi_device" title="spi_device">spi_device</a> *<em>&nbsp;spi</em>, struct <a class="reference internal" href="../driver-api/spi.html#c.spi_message" title="spi_message">spi_message</a> *<em>&nbsp;m</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tinydrm_dbg_spi_message" title="Permalink to this definition">¶</a></dt>
<dd><p>Dump SPI message</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_device</span> <span class="pre">*</span> <span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_message</span> <span class="pre">*</span> <span class="pre">m</span></code></dt>
<dd>SPI message</dd>
</dl>
<p><strong>Description</strong></p>
<p>Dumps info about the transfers in a SPI message including buffer content.
DEBUG has to be defined for this function to be enabled alongside setting
the DRM_UT_DRIVER bit of <code class="xref c c-type docutils literal notranslate"><span class="pre">drm_debug</span></code>.</p>
<dl class="function">
<dt id="c.tinydrm_spi_max_transfer_size">
size_t <code class="descname">tinydrm_spi_max_transfer_size</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/spi.html#c.spi_device" title="spi_device">spi_device</a> *<em>&nbsp;spi</em>, size_t<em>&nbsp;max_len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tinydrm_spi_max_transfer_size" title="Permalink to this definition">¶</a></dt>
<dd><p>Determine max SPI transfer size</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_device</span> <span class="pre">*</span> <span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">max_len</span></code></dt>
<dd>Maximum buffer size needed (optional)</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function returns the maximum size to use for SPI transfers. It checks
the SPI master, the optional <strong>max_len</strong> and the module parameter spi_max and
returns the smallest.</p>
<p><strong>Return</strong></p>
<p>Maximum size for SPI transfers</p>
<dl class="function">
<dt id="c.tinydrm_spi_bpw_supported">
bool <code class="descname">tinydrm_spi_bpw_supported</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/spi.html#c.spi_device" title="spi_device">spi_device</a> *<em>&nbsp;spi</em>, u8<em>&nbsp;bpw</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tinydrm_spi_bpw_supported" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if bits per word is supported</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_device</span> <span class="pre">*</span> <span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">bpw</span></code></dt>
<dd>Bits per word</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function checks to see if the SPI master driver supports <strong>bpw</strong>.</p>
<p><strong>Return</strong></p>
<p>True if <strong>bpw</strong> is supported, false otherwise.</p>
<dl class="function">
<dt id="c.tinydrm_spi_transfer">
int <code class="descname">tinydrm_spi_transfer</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/spi.html#c.spi_device" title="spi_device">spi_device</a> *<em>&nbsp;spi</em>, u32<em>&nbsp;speed_hz</em>, struct <a class="reference internal" href="../driver-api/spi.html#c.spi_transfer" title="spi_transfer">spi_transfer</a> *<em>&nbsp;header</em>, u8<em>&nbsp;bpw</em>, const void *<em>&nbsp;buf</em>, size_t<em>&nbsp;len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tinydrm_spi_transfer" title="Permalink to this definition">¶</a></dt>
<dd><p>SPI transfer helper</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_device</span> <span class="pre">*</span> <span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u32</span> <span class="pre">speed_hz</span></code></dt>
<dd>Override speed (optional)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_transfer</span> <span class="pre">*</span> <span class="pre">header</span></code></dt>
<dd>Optional header transfer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">bpw</span></code></dt>
<dd>Bits per word</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">void</span> <span class="pre">*</span> <span class="pre">buf</span></code></dt>
<dd>Buffer to transfer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt>
<dd>Buffer length</dd>
</dl>
<p><strong>Description</strong></p>
<p>This SPI transfer helper breaks up the transfer of <strong>buf</strong> into chunks which
the SPI master driver can handle. If the machine is Little Endian and the
SPI master driver doesn’t support 16 bits per word, it swaps the bytes and
does a 8-bit transfer.
If <strong>header</strong> is set, it is prepended to each SPI message.</p>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.tinydrm_display_pipe_init">
int <code class="descname">tinydrm_display_pipe_init</code><span class="sig-paren">(</span>struct <a class="reference internal" href="drm-internals.html#c.drm_device" title="drm_device">drm_device</a> *<em>&nbsp;drm</em>, struct <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe" title="drm_simple_display_pipe">drm_simple_display_pipe</a> *<em>&nbsp;pipe</em>, const struct <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe_funcs" title="drm_simple_display_pipe_funcs">drm_simple_display_pipe_funcs</a> *<em>&nbsp;funcs</em>, int<em>&nbsp;connector_type</em>, const uint32_t *<em>&nbsp;formats</em>, unsigned int<em>&nbsp;format_count</em>, const struct <a class="reference internal" href="drm-kms.html#c.drm_display_mode" title="drm_display_mode">drm_display_mode</a> *<em>&nbsp;mode</em>, unsigned int<em>&nbsp;rotation</em><span class="sig-paren">)</span><a class="headerlink" href="#c.tinydrm_display_pipe_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize display pipe</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_device</span> <span class="pre">*</span> <span class="pre">drm</span></code></dt>
<dd>DRM device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_simple_display_pipe</span> <span class="pre">*</span> <span class="pre">pipe</span></code></dt>
<dd>Display pipe</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">drm_simple_display_pipe_funcs</span> <span class="pre">*</span> <span class="pre">funcs</span></code></dt>
<dd>Display pipe functions</dd>
<dt><code class="docutils literal notranslate"><span class="pre">int</span> <span class="pre">connector_type</span></code></dt>
<dd>Connector type</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">uint32_t</span> <span class="pre">*</span> <span class="pre">formats</span></code></dt>
<dd>Array of supported formats (DRM_FORMAT_*)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">format_count</span></code></dt>
<dd>Number of elements in <strong>formats</strong></dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">drm_display_mode</span> <span class="pre">*</span> <span class="pre">mode</span></code></dt>
<dd>Supported mode</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">rotation</span></code></dt>
<dd>Initial <strong>mode</strong> rotation in degrees Counter Clock Wise</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function sets up a <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe" title="drm_simple_display_pipe"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_simple_display_pipe</span></code></a> with a <a class="reference internal" href="drm-kms.html#c.drm_connector" title="drm_connector"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_connector</span></code></a> that
has one fixed <a class="reference internal" href="drm-kms.html#c.drm_display_mode" title="drm_display_mode"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_display_mode</span></code></a> which is rotated according to <strong>rotation</strong>.</p>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
</div>
<div class="section" id="mipi-dbi-compatible-controllers">
<h2>MIPI DBI Compatible Controllers<a class="headerlink" href="#mipi-dbi-compatible-controllers" title="Permalink to this headline">¶</a></h2>
<p>This library provides helpers for MIPI Display Bus Interface (DBI)
compatible display controllers.</p>
<p>Many controllers for tiny lcd displays are MIPI compliant and can use this
library. If a controller uses registers 0x2A and 0x2B to set the area to
update and uses register 0x2C to write to frame memory, it is most likely
MIPI compliant.</p>
<p>Only MIPI Type 1 displays are supported since a full frame memory is needed.</p>
<p>There are 3 MIPI DBI implementation types:</p>
<ol class="upperalpha simple">
<li>Motorola 6800 type parallel bus</li>
<li>Intel 8080 type parallel bus</li>
<li>SPI type with 3 options:<ol class="arabic">
<li>9-bit with the Data/Command signal as the ninth bit</li>
<li>Same as above except it’s sent as 16 bits</li>
<li>8-bit with the Data/Command signal as a separate D/CX pin</li>
</ol>
</li>
</ol>
<p>Currently mipi_dbi only supports Type C options 1 and 3 with
<a class="reference internal" href="#c.mipi_dbi_spi_init" title="mipi_dbi_spi_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">mipi_dbi_spi_init()</span></code></a>.</p>
<dl class="type">
<dt id="c.mipi_dbi">
struct <code class="descname">mipi_dbi</code><a class="headerlink" href="#c.mipi_dbi" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DBI controller</p>
</dd></dl>

<p><strong>Definition</strong></p>
<div class="highlight-none notranslate"><div class="highlight"><pre><span></span>struct mipi_dbi {
  struct drm_device drm;
  struct drm_simple_display_pipe pipe;
  struct spi_device *spi;
  bool enabled;
  struct mutex cmdlock;
  int (*command)(struct mipi_dbi *mipi, u8 *cmd, u8 *param, size_t num);
  const u8 *read_commands;
  struct gpio_desc *dc;
  u16 *tx_buf;
  void *tx_buf9;
  size_t tx_buf9_len;
  bool swap_bytes;
  struct gpio_desc *reset;
  unsigned int rotation;
  struct backlight_device *backlight;
  struct regulator *regulator;
};
</pre></div>
</div>
<p><strong>Members</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">drm</span></code></dt>
<dd>DRM device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">pipe</span></code></dt>
<dd>Display pipe structure</dd>
<dt><code class="docutils literal notranslate"><span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">enabled</span></code></dt>
<dd>Pipeline is enabled</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cmdlock</span></code></dt>
<dd>Command lock</dd>
<dt><code class="docutils literal notranslate"><span class="pre">command</span></code></dt>
<dd>Bus specific callback executing commands.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">read_commands</span></code></dt>
<dd>Array of read commands terminated by a zero entry.
Reading is disabled if this is NULL.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">dc</span></code></dt>
<dd>Optional D/C gpio.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_buf</span></code></dt>
<dd>Buffer used for transfer (copy clip rect area)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_buf9</span></code></dt>
<dd>Buffer used for Option 1 9-bit conversion</dd>
<dt><code class="docutils literal notranslate"><span class="pre">tx_buf9_len</span></code></dt>
<dd>Size of tx_buf9.</dd>
<dt><code class="docutils literal notranslate"><span class="pre">swap_bytes</span></code></dt>
<dd>Swap bytes in buffer before transfer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">reset</span></code></dt>
<dd>Optional reset gpio</dd>
<dt><code class="docutils literal notranslate"><span class="pre">rotation</span></code></dt>
<dd>initial rotation in degrees Counter Clock Wise</dd>
<dt><code class="docutils literal notranslate"><span class="pre">backlight</span></code></dt>
<dd>backlight device (optional)</dd>
<dt><code class="docutils literal notranslate"><span class="pre">regulator</span></code></dt>
<dd>power regulator (optional)</dd>
</dl>
<dl class="function">
<dt id="c.mipi_dbi_command">
<code class="descname">mipi_dbi_command</code><span class="sig-paren">(</span><em>mipi</em>, <em>cmd</em>, <em>seq…</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_command" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DCS command with optional parameter(s)</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">mipi</span></code></dt>
<dd>MIPI structure</dd>
<dt><code class="docutils literal notranslate"><span class="pre">cmd</span></code></dt>
<dd>Command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">seq...</span></code></dt>
<dd>Optional parameter(s)</dd>
</dl>
<p><strong>Description</strong></p>
<p>Send MIPI DCS command to the controller. Use <a class="reference internal" href="#c.mipi_dbi_command_read" title="mipi_dbi_command_read"><code class="xref c c-func docutils literal notranslate"><span class="pre">mipi_dbi_command_read()</span></code></a> for
get/read.</p>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.mipi_dbi_command_read">
int <code class="descname">mipi_dbi_command_read</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em>, u8<em>&nbsp;cmd</em>, u8 *<em>&nbsp;val</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_command_read" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DCS read command</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI structure</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cmd</span></code></dt>
<dd>Command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">val</span></code></dt>
<dd>Value read</dd>
</dl>
<p><strong>Description</strong></p>
<p>Send MIPI DCS read command to the controller.</p>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.mipi_dbi_command_buf">
int <code class="descname">mipi_dbi_command_buf</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em>, u8<em>&nbsp;cmd</em>, u8 *<em>&nbsp;data</em>, size_t<em>&nbsp;len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_command_buf" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DCS command with parameter(s) in an array</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI structure</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">cmd</span></code></dt>
<dd>Command</dd>
<dt><code class="docutils literal notranslate"><span class="pre">u8</span> <span class="pre">*</span> <span class="pre">data</span></code></dt>
<dd>Parameter buffer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt>
<dd>Buffer length</dd>
</dl>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.mipi_dbi_buf_copy">
int <code class="descname">mipi_dbi_buf_copy</code><span class="sig-paren">(</span>void *<em>&nbsp;dst</em>, struct <a class="reference internal" href="drm-kms.html#c.drm_framebuffer" title="drm_framebuffer">drm_framebuffer</a> *<em>&nbsp;fb</em>, struct <a class="reference internal" href="drm-kms-helpers.html#c.drm_rect" title="drm_rect">drm_rect</a> *<em>&nbsp;clip</em>, bool<em>&nbsp;swap</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_buf_copy" title="Permalink to this definition">¶</a></dt>
<dd><p>Copy a framebuffer, transforming it if necessary</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">void</span> <span class="pre">*</span> <span class="pre">dst</span></code></dt>
<dd>The destination buffer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_framebuffer</span> <span class="pre">*</span> <span class="pre">fb</span></code></dt>
<dd>The source framebuffer</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_rect</span> <span class="pre">*</span> <span class="pre">clip</span></code></dt>
<dd>Clipping rectangle of the area to be copied</dd>
<dt><code class="docutils literal notranslate"><span class="pre">bool</span> <span class="pre">swap</span></code></dt>
<dd>When true, swap MSB/LSB of 16-bit values</dd>
</dl>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.mipi_dbi_pipe_update">
void <code class="descname">mipi_dbi_pipe_update</code><span class="sig-paren">(</span>struct <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe" title="drm_simple_display_pipe">drm_simple_display_pipe</a> *<em>&nbsp;pipe</em>, struct <a class="reference internal" href="drm-kms.html#c.drm_plane_state" title="drm_plane_state">drm_plane_state</a> *<em>&nbsp;old_state</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_pipe_update" title="Permalink to this definition">¶</a></dt>
<dd><p>Display pipe update helper</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_simple_display_pipe</span> <span class="pre">*</span> <span class="pre">pipe</span></code></dt>
<dd>Simple display pipe</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_plane_state</span> <span class="pre">*</span> <span class="pre">old_state</span></code></dt>
<dd>Old plane state</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function handles framebuffer flushing and vblank events. Drivers can use
this as their <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe_funcs" title="drm_simple_display_pipe_funcs"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_simple_display_pipe_funcs-&gt;update</span></code></a> callback.</p>
<dl class="function">
<dt id="c.mipi_dbi_enable_flush">
void <code class="descname">mipi_dbi_enable_flush</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em>, struct <a class="reference internal" href="drm-kms.html#c.drm_crtc_state" title="drm_crtc_state">drm_crtc_state</a> *<em>&nbsp;crtc_state</em>, struct <a class="reference internal" href="drm-kms.html#c.drm_plane_state" title="drm_plane_state">drm_plane_state</a> *<em>&nbsp;plane_state</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_enable_flush" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DBI enable helper</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI DBI structure</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_crtc_state</span> <span class="pre">*</span> <span class="pre">crtc_state</span></code></dt>
<dd>CRTC state</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_plane_state</span> <span class="pre">*</span> <span class="pre">plane_state</span></code></dt>
<dd>Plane state</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function sets <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi-&gt;enabled</span></code></a>, flushes the whole framebuffer and
enables the backlight. Drivers can use this in their
<a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe_funcs" title="drm_simple_display_pipe_funcs"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_simple_display_pipe_funcs-&gt;enable</span></code></a> callback.</p>
<p><strong>Note</strong></p>
<p>Drivers which don’t use <a class="reference internal" href="#c.mipi_dbi_pipe_update" title="mipi_dbi_pipe_update"><code class="xref c c-func docutils literal notranslate"><span class="pre">mipi_dbi_pipe_update()</span></code></a> because they have custom
framebuffer flushing, can’t use this function since they both use the same
flushing code.</p>
<dl class="function">
<dt id="c.mipi_dbi_pipe_disable">
void <code class="descname">mipi_dbi_pipe_disable</code><span class="sig-paren">(</span>struct <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe" title="drm_simple_display_pipe">drm_simple_display_pipe</a> *<em>&nbsp;pipe</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_pipe_disable" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DBI pipe disable helper</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_simple_display_pipe</span> <span class="pre">*</span> <span class="pre">pipe</span></code></dt>
<dd>Display pipe</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function disables backlight if present, if not the display memory is
blanked. The regulator is disabled if in use. Drivers can use this as their
<a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe_funcs" title="drm_simple_display_pipe_funcs"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_simple_display_pipe_funcs-&gt;disable</span></code></a> callback.</p>
<dl class="function">
<dt id="c.mipi_dbi_init">
int <code class="descname">mipi_dbi_init</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em>, const struct <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe_funcs" title="drm_simple_display_pipe_funcs">drm_simple_display_pipe_funcs</a> *<em>&nbsp;funcs</em>, const struct <a class="reference internal" href="drm-kms.html#c.drm_display_mode" title="drm_display_mode">drm_display_mode</a> *<em>&nbsp;mode</em>, unsigned int<em>&nbsp;rotation</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_init" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DBI initialization</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd><a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi</span></code></a> structure to initialize</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">drm_simple_display_pipe_funcs</span> <span class="pre">*</span> <span class="pre">funcs</span></code></dt>
<dd>Display pipe functions</dd>
<dt><code class="docutils literal notranslate"><span class="pre">const</span> <span class="pre">struct</span> <span class="pre">drm_display_mode</span> <span class="pre">*</span> <span class="pre">mode</span></code></dt>
<dd>Display mode</dd>
<dt><code class="docutils literal notranslate"><span class="pre">unsigned</span> <span class="pre">int</span> <span class="pre">rotation</span></code></dt>
<dd>Initial rotation in degrees Counter Clock Wise</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function sets up a <a class="reference internal" href="drm-kms-helpers.html#c.drm_simple_display_pipe" title="drm_simple_display_pipe"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_simple_display_pipe</span></code></a> with a <a class="reference internal" href="drm-kms.html#c.drm_connector" title="drm_connector"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_connector</span></code></a> that
has one fixed <a class="reference internal" href="drm-kms.html#c.drm_display_mode" title="drm_display_mode"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_display_mode</span></code></a> which is rotated according to <strong>rotation</strong>.
This mode is used to set the mode config min/max width/height properties.
Additionally <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi.tx_buf</span></code></a> is allocated.</p>
<p>Supported formats: Native RGB565 and emulated XRGB8888.</p>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.mipi_dbi_release">
void <code class="descname">mipi_dbi_release</code><span class="sig-paren">(</span>struct <a class="reference internal" href="drm-internals.html#c.drm_device" title="drm_device">drm_device</a> *<em>&nbsp;drm</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_release" title="Permalink to this definition">¶</a></dt>
<dd><p>DRM driver release helper</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_device</span> <span class="pre">*</span> <span class="pre">drm</span></code></dt>
<dd>DRM device</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function finalizes and frees <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi</span></code></a>.</p>
<p>Drivers can use this as their <a class="reference internal" href="drm-internals.html#c.drm_driver" title="drm_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_driver-&gt;release</span></code></a> callback.</p>
<dl class="function">
<dt id="c.mipi_dbi_hw_reset">
void <code class="descname">mipi_dbi_hw_reset</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_hw_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>Hardware reset of controller</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI DBI structure</dd>
</dl>
<p><strong>Description</strong></p>
<p>Reset controller if the <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi-&gt;reset</span></code></a> gpio is set.</p>
<dl class="function">
<dt id="c.mipi_dbi_display_is_on">
bool <code class="descname">mipi_dbi_display_is_on</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_display_is_on" title="Permalink to this definition">¶</a></dt>
<dd><p>Check if display is on</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI DBI structure</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function checks the Power Mode register (if readable) to see if
display output is turned on. This can be used to see if the bootloader
has already turned on the display avoiding flicker when the pipeline is
enabled.</p>
<p><strong>Return</strong></p>
<p>true if the display can be verified to be on, false otherwise.</p>
<dl class="function">
<dt id="c.mipi_dbi_poweron_reset">
int <code class="descname">mipi_dbi_poweron_reset</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_poweron_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DBI poweron and reset</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI DBI structure</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function enables the regulator if used and does a hardware and software
reset.</p>
<p><strong>Return</strong></p>
<p>Zero on success, or a negative error code.</p>
<dl class="function">
<dt id="c.mipi_dbi_poweron_conditional_reset">
int <code class="descname">mipi_dbi_poweron_conditional_reset</code><span class="sig-paren">(</span>struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_poweron_conditional_reset" title="Permalink to this definition">¶</a></dt>
<dd><p>MIPI DBI poweron and conditional reset</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd>MIPI DBI structure</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function enables the regulator if used and if the display is off, it
does a hardware and software reset. If <a class="reference internal" href="#c.mipi_dbi_display_is_on" title="mipi_dbi_display_is_on"><code class="xref c c-func docutils literal notranslate"><span class="pre">mipi_dbi_display_is_on()</span></code></a> determines
that the display is on, no reset is performed.</p>
<p><strong>Return</strong></p>
<p>Zero if the controller was reset, 1 if the display was already on, or a
negative error code.</p>
<dl class="function">
<dt id="c.mipi_dbi_spi_cmd_max_speed">
u32 <code class="descname">mipi_dbi_spi_cmd_max_speed</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/spi.html#c.spi_device" title="spi_device">spi_device</a> *<em>&nbsp;spi</em>, size_t<em>&nbsp;len</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_spi_cmd_max_speed" title="Permalink to this definition">¶</a></dt>
<dd><p>get the maximum SPI bus speed</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_device</span> <span class="pre">*</span> <span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">size_t</span> <span class="pre">len</span></code></dt>
<dd>The transfer buffer length.</dd>
</dl>
<p><strong>Description</strong></p>
<p>Many controllers have a max speed of 10MHz, but can be pushed way beyond
that. Increase reliability by running pixel data at max speed and the rest
at 10MHz, preventing transfer glitches from messing up the init settings.</p>
<dl class="function">
<dt id="c.mipi_dbi_spi_init">
int <code class="descname">mipi_dbi_spi_init</code><span class="sig-paren">(</span>struct <a class="reference internal" href="../driver-api/spi.html#c.spi_device" title="spi_device">spi_device</a> *<em>&nbsp;spi</em>, struct <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi">mipi_dbi</a> *<em>&nbsp;mipi</em>, struct gpio_desc *<em>&nbsp;dc</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_spi_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Initialize MIPI DBI SPI interfaced controller</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">spi_device</span> <span class="pre">*</span> <span class="pre">spi</span></code></dt>
<dd>SPI device</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">mipi_dbi</span> <span class="pre">*</span> <span class="pre">mipi</span></code></dt>
<dd><a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi</span></code></a> structure to initialize</dd>
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">gpio_desc</span> <span class="pre">*</span> <span class="pre">dc</span></code></dt>
<dd>D/C gpio (optional)</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function sets <a class="reference internal" href="#c.mipi_dbi" title="mipi_dbi"><code class="xref c c-type docutils literal notranslate"><span class="pre">mipi_dbi-&gt;command</span></code></a>, enables <code class="xref c c-type docutils literal notranslate"><span class="pre">mipi-&gt;read_commands</span></code> for the
usual read commands. It should be followed by a call to <a class="reference internal" href="#c.mipi_dbi_init" title="mipi_dbi_init"><code class="xref c c-func docutils literal notranslate"><span class="pre">mipi_dbi_init()</span></code></a> or
a driver-specific init.</p>
<p>If <strong>dc</strong> is set, a Type C Option 3 interface is assumed, if not
Type C Option 1.</p>
<p>If the SPI master driver doesn’t support the necessary bits per word,
the following transformation is used:</p>
<ul class="simple">
<li>9-bit: reorder buffer as 9x 8-bit words, padded with no-op command.</li>
<li>16-bit: if big endian send as 8-bit, if little endian swap bytes</li>
</ul>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
<dl class="function">
<dt id="c.mipi_dbi_debugfs_init">
int <code class="descname">mipi_dbi_debugfs_init</code><span class="sig-paren">(</span>struct <a class="reference internal" href="drm-internals.html#c.drm_minor" title="drm_minor">drm_minor</a> *<em>&nbsp;minor</em><span class="sig-paren">)</span><a class="headerlink" href="#c.mipi_dbi_debugfs_init" title="Permalink to this definition">¶</a></dt>
<dd><p>Create debugfs entries</p>
</dd></dl>

<p><strong>Parameters</strong></p>
<dl class="docutils">
<dt><code class="docutils literal notranslate"><span class="pre">struct</span> <span class="pre">drm_minor</span> <span class="pre">*</span> <span class="pre">minor</span></code></dt>
<dd>DRM minor</dd>
</dl>
<p><strong>Description</strong></p>
<p>This function creates a ‘command’ debugfs file for sending commands to the
controller or getting the read command values.
Drivers can use this as their <a class="reference internal" href="drm-internals.html#c.drm_driver" title="drm_driver"><code class="xref c c-type docutils literal notranslate"><span class="pre">drm_driver-&gt;debugfs_init</span></code></a> callback.</p>
<p><strong>Return</strong></p>
<p>Zero on success, negative error code on failure.</p>
</div>
</div>


           </div>
           
          </div>
          <footer>
  
    <div class="rst-footer-buttons" role="navigation" aria-label="footer navigation">
      
        <a href="tve200.html" class="btn btn-neutral float-right" title="drm/tve200 Faraday TV Encoder 200" accesskey="n" rel="next">Next <span class="fa fa-arrow-circle-right"></span></a>
      
      
        <a href="tegra.html" class="btn btn-neutral float-left" title="drm/tegra NVIDIA Tegra GPU and display driver" accesskey="p" rel="prev"><span class="fa fa-arrow-circle-left"></span> Previous</a>
      
    </div>
  

  <hr/>

  <div role="contentinfo">
    <p>
        &copy; Copyright The kernel development community

    </p>
  </div>
  Built with <a href="http://sphinx-doc.org/">Sphinx</a> using a <a href="https://github.com/rtfd/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>. 

</footer>

        </div>
      </div>

    </section>

  </div>
  


  <script type="text/javascript">
      jQuery(function () {
          SphinxRtdTheme.Navigation.enable(true);
      });
  </script>

  
  
    
   

</body>
</html>